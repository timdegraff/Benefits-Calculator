<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MI Benefit Calculator 2026</title>
    <style>
        :root {
            --primary: #007AFF; /* iOS Blue */
            --bg: #F2F2F7;
            --card: #FFFFFF;
            --text: #000000;
            --subtext: #8E8E93;
            --platinum: #5E5CE6; /* Indigo for Platinum */
            --silver: #A0A0A5;
            --gold: #FF9500;
            --cliff: #FF3B30;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            -webkit-tap-highlight-color: transparent;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        h1 {
            font-size: 24px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            background: #E5E5EA;
            border-radius: 12px;
            padding: 2px;
            margin-bottom: 20px;
        }
        .tab {
            flex: 1;
            text-align: center;
            padding: 10px;
            font-weight: 600;
            font-size: 14px;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .tab.active {
            background: var(--card);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* Cards */
        .card {
            background: var(--card);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .hidden { display: none; }

        /* Inputs */
        label {
            display: block;
            font-size: 14px;
            color: var(--subtext);
            margin-bottom: 8px;
            font-weight: 500;
        }
        .value-display {
            color: var(--text);
            font-weight: 600;
            float: right;
        }
        .limit-display {
            display: block;
            font-size: 11px;
            color: var(--cliff);
            margin-top: -5px;
            margin-bottom: 10px;
            text-align: right;
        }
        
        input[type="range"] {
            width: 100%;
            margin-bottom: 20px;
            margin-top: 10px;
            accent-color: var(--primary);
            box-sizing: border-box;
        }

        /* Planning Targets */
        .targets-box {
            background: #F9F9F9;
            border: 1px solid #E5E5EA;
            border-radius: 10px;
            padding: 12px;
            margin-top: 5px;
            margin-bottom: 20px;
        }
        .targets-header {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--subtext);
            margin-bottom: 8px;
            font-weight: 600;
        }
        .target-row {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            margin-bottom: 6px;
        }
        .target-row:last-child { margin-bottom: 0; }
        .t-label { color: var(--text); }
        .t-val { font-weight: 600; font-family: monospace; }
        .dot { height: 8px; width: 8px; display: inline-block; border-radius: 50%; margin-right: 6px; }
        
        /* Results */
        .result-box {
            text-align: center;
            padding: 15px;
            border-radius: 12px;
            background: #F2F2F7;
            margin-top: 10px;
        }
        .result-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 5px;
            color: var(--primary);
        }
        .result-desc {
            font-size: 13px;
            color: var(--subtext);
            line-height: 1.4;
        }

        /* Thermometer Style Indicators */
        .zone-indicator {
            height: 8px;
            width: 100%;
            background: #E5E5EA;
            border-radius: 4px;
            margin-top: 15px;
            overflow: hidden;
            position: relative;
        }
        .zone-bar {
            height: 100%;
            width: 0%;
            transition: width 0.3s ease, background-color 0.3s ease;
        }

        .legal {
            font-size: 10px;
            color: #999;
            text-align: center;
            margin-top: 30px;
            line-height: 1.4;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>MI Benefits 2026</h1>

    <div class="tabs">
        <div class="tab active" onclick="switchTab('health')">Health Coverage</div>
        <div class="tab" onclick="switchTab('snap')">SNAP (Food)</div>
    </div>

    <div class="card">
        <label>Household Size: <span id="hhSizeVal" class="value-display">1</span></label>
        <input type="range" id="hhSize" min="1" max="10" value="1" oninput="updateCalculations()">
    </div>

    <div id="healthTab">
        <div class="card">
            <label>Annual Income (2026): <span id="incomeVal" class="value-display">$35,000</span></label>
            <input type="range" id="annualIncome" min="0" max="300000" step="1000" value="35000" oninput="updateCalculations()">
            
            <div class="targets-box">
                <div class="targets-header">Investment Planning Targets</div>
                <div class="target-row">
                    <span class="t-label"><span class="dot" style="background:var(--platinum)"></span>Stay on Medicaid</span>
                    <span class="t-val" id="target138">$0</span>
                </div>
                <div class="target-row">
                    <span class="t-label"><span class="dot" style="background:var(--silver)"></span>Keep Silver CSR</span>
                    <span class="t-val" id="target250">$0</span>
                </div>
                <div class="target-row">
                    <span class="t-label"><span class="dot" style="background:var(--gold)"></span>Max Subsidy Limit</span>
                    <span class="t-val" id="target400">$0</span>
                </div>
            </div>

            <div id="healthResult" class="result-box hidden">
                <div id="healthTitle" class="result-title">--</div>
                <div id="healthDesc" class="result-desc">--</div>
                <div class="zone-indicator">
                    <div id="healthBar" class="zone-bar"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="snapTab" class="hidden">
        <div class="card">
            <label>Annual Gross Income <span id="snapIncomeVal" class="value-display">$0</span></label>
            <input type="range" id="annualSnapIncome" min="0" max="100000" step="500" value="0" oninput="updateCalculations()">
            <span id="snapLimitText" class="limit-display">Max Allowed: --</span>
            
            <label>Monthly Deductions (Rent/Util) <span id="deductVal" class="value-display">$0</span></label>
            <input type="range" id="monthlyDeductions" min="0" max="5000" step="50" value="0" oninput="updateCalculations()">

            <div id="snapResult" class="result-box hidden">
                <div id="snapTitle" class="result-title">--</div>
                <div id="snapDesc" class="result-desc">--</div>
            </div>
        </div>
    </div>

    <div class="legal">
        Disclaimer: This tool provides estimates for informational purposes only. It is not an official determination of eligibility. Official determinations are made by MDHHS. "Platinum" refers to plan value equivalence, not official ACA metal tier.
    </div>
</div>

<script>
    // 2026 FPL Data (100% level)
    function getFPL(size) {
        return 15650 + ((size - 1) * 5500);
    }

    // SNAP 2026 Estimates
    function getMaxSnap(size) {
        const base = 292; 
        const perPerson = 215; 
        return base + ((size - 1) * perPerson);
    }
    
    function getStdDeduction(size) {
        if (size <= 3) return 198;
        if (size == 4) return 208;
        if (size == 5) return 244;
        return 279; // 6+
    }

    function switchTab(tab) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelector(`.tab[onclick="switchTab('${tab}')"]`).classList.add('active');
        
        document.getElementById('healthTab').classList.add('hidden');
        document.getElementById('snapTab').classList.add('hidden');
        document.getElementById(`${tab}Tab`).classList.remove('hidden');
    }

    function updateCalculations() {
        const size = parseInt(document.getElementById('hhSize').value);
        document.getElementById('hhSizeVal').innerText = size;

        // --- Health Tab Updates ---
        const annualInc = parseFloat(document.getElementById('annualIncome').value);
        document.getElementById('incomeVal').innerText = "$" + annualInc.toLocaleString();
        
        // Update Target Thresholds
        const fpl = getFPL(size);
        document.getElementById('target138').innerText = "< $" + Math.floor(fpl * 1.38).toLocaleString();
        document.getElementById('target250').innerText = "< $" + Math.floor(fpl * 2.50).toLocaleString();
        document.getElementById('target400').innerText = "< $" + Math.floor(fpl * 4.00).toLocaleString();

        calcHealth(size, annualInc);

        // --- SNAP Tab Updates ---
        const fpl100_annual = getFPL(size);
        const limit_annual = fpl100_annual * 2.0; // 200% FPL Limit Annual
        
        const snapIncomeSlider = document.getElementById('annualSnapIncome');
        const snapDeductSlider = document.getElementById('monthlyDeductions');

        // Cap Income Slider
        snapIncomeSlider.max = limit_annual;
        document.getElementById('snapLimitText').innerText = "Max Allowed: $" + limit_annual.toLocaleString() + "/yr";

        // Get Income Value (clamped)
        let snapAnnual = parseFloat(snapIncomeSlider.value);
        if (snapAnnual > limit_annual) snapAnnual = limit_annual;

        // Calculate Monthly Income
        const currentMonthlyIncome = snapAnnual / 12;

        // Cap Deductions Slider
        let maxDeduction = Math.ceil(currentMonthlyIncome / 50) * 50;
        if (maxDeduction === 0) maxDeduction = 0;
        snapDeductSlider.max = maxDeduction;

        // Get Deduction Value (clamped)
        let snapDeduct = parseFloat(snapDeductSlider.value);
        if (snapDeduct > maxDeduction) {
            snapDeduct = maxDeduction;
            snapDeductSlider.value = maxDeduction;
        }

        // Update Labels
        document.getElementById('snapIncomeVal').innerText = "$" + snapAnnual.toLocaleString();
        document.getElementById('deductVal').innerText = "$" + snapDeduct.toLocaleString();

        calcSnap(size, currentMonthlyIncome, snapDeduct);
    }

    function calcHealth(size, income) {
        const resultBox = document.getElementById('healthResult');
        const title = document.getElementById('healthTitle');
        const desc = document.getElementById('healthDesc');
        const bar = document.getElementById('healthBar');

        resultBox.classList.remove('hidden');
        
        const fpl100 = getFPL(size);
        const fplPercent = (income / fpl100) * 100;
        
        resultBox.className = 'result-box';
        
        if (fplPercent <= 138) {
            title.innerText = "Healthy Michigan Plan (Platinum)";
            desc.innerText = "State-sponsored Platinum-equivalent plan. $0 premiums.";
            resultBox.style.border = "2px solid var(--platinum)";
            title.style.color = "var(--platinum)";
            bar.style.width = "25%";
            bar.style.backgroundColor = "var(--platinum)";
        } else if (fplPercent <= 250) {
            title.innerText = "Silver Plus (High Value)";
            desc.innerText = "Eligible for Cost Sharing Reductions (CSR).";
            resultBox.style.border = "2px solid var(--silver)";
            title.style.color = "#666";
            bar.style.width = "50%";
            bar.style.backgroundColor = "var(--silver)";
        } else if (fplPercent <= 400) {
            title.innerText = "Standard Marketplace";
            desc.innerText = "Eligible for premium tax credits.";
            resultBox.style.border = "2px solid var(--gold)";
            title.style.color = "var(--gold)";
            bar.style.width = "75%";
            bar.style.backgroundColor = "var(--gold)";
        } else {
            title.innerText = "Subsidy Cliff";
            desc.innerText = "Full price premiums apply.";
            resultBox.style.border = "2px solid var(--cliff)";
            title.style.color = "var(--cliff)";
            bar.style.width = "100%";
            bar.style.backgroundColor = "var(--cliff)";
        }
    }

    function calcSnap(size, monthlyIncome, deductions) {
        const resultBox = document.getElementById('snapResult');
        const title = document.getElementById('snapTitle');
        const desc = document.getElementById('snapDesc');

        resultBox.classList.remove('hidden');
        
        const maxBenefit = getMaxSnap(size);
        const netIncome = Math.max(0, monthlyIncome - deductions);
        const benefit = maxBenefit - (0.3 * netIncome);
        
        if (benefit > 0) {
            let finalBenefit = Math.max(0, Math.round(benefit));
            if (size <= 2 && finalBenefit < 23 && finalBenefit > 0) finalBenefit = 23;
            
            title.innerText = `$${finalBenefit} / month`;
            desc.innerText = "Estimated SNAP Benefit amount.";
            title.style.color = "var(--primary)";
        } else {
            title.innerText = "$0 Benefit";
            desc.innerText = "Benefit reduces to zero.";
            title.style.color = "var(--subtext)";
        }
    }

    // Initialize on load
    window.onload = updateCalculations;
</script>

</body>
</html>
